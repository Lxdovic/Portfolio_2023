!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-vertical"]={},e.React)}(this,(function(e,t){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={exports:{}};!function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}(n);var o=r(n.exports),i={exports:{}},c={exports:{}};!function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports}(c),function(e){var t=c.exports;e.exports=function(e,r){if(null==e)return{};var n,o,i=t(e,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)n=c[o],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}(i);var u=r(i.exports),a={exports:{}},s={exports:{}};!function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(s);var l={exports:{}};!function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],c=!0,u=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(u)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports}(l);var f={exports:{}},p={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}(p),function(e){var t=p.exports;e.exports=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}(f);var v={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(v),function(e){var t=s.exports,r=l.exports,n=f.exports,o=v.exports;e.exports=function(e,i){return t(e)||r(e,i)||n(e,i)||o()},e.exports.__esModule=!0,e.exports.default=e.exports}(a);var h=r(a.exports),b=["type"],d=["children"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O,x={thresholdCount:500,pauseAnimation:!0},g=t.createContext(x),j=t.createContext(void 0),w=function(e,t){var r=t.type,n=u(t,b);return"init"===r?y(y({},e),n):e},S=function(e){var r=e.children,n=u(e,d),o=Object.assign(x,n),i=t.useReducer(w,o),c=h(i,2),a=c[0],s=c[1];return t.createElement(g.Provider,{value:a},t.createElement(j.Provider,{value:s},r))};e.RhvItemState=void 0,(O=e.RhvItemState||(e.RhvItemState={}))[O.None=0]="None",O[O.Initial=1]="Initial",O[O.Enter=2]="Enter",O[O.Leave=3]="Leave",O[O.Focus=4]="Focus";var P=0,I=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!1},R=function(e){return Object.keys(e).filter((function(e){return!Number.isInteger(Number(e))}))},E=["itemState"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(r){var n=r.element,o=r.index,i=r.onStateChange,c=t.useRef(e.RhvItemState.None),a=t.useRef(null),s=t.useRef(null),l=[t.useContext(g),t.useContext(j)],f=h(l,1)[0],p=function(e){var r=t.useState(null),n=h(r,2),o=n[0],i=n[1],c=t.useRef();return t.useEffect((function(){var t=e.current;if(t){var r=new ResizeObserver((function(e){var t=h(e,1)[0].borderBoxSize[0],r=window.innerHeight,n=window.innerWidth,o=t.blockSize,c=t.inlineSize;i({height:Math.max(r,o),width:Math.max(n,c)})}));return r.observe(t),c.current=r,function(){r.disconnect()}}}),[]),[o]}(s),v=h(p,1)[0],b=function(e,r,n,o){var i=t.useState(null),c=h(i,2),u=c[0],a=c[1],s=t.useRef();return t.useEffect((function(){var t=r.current;if(t){var i=0,c=0,u={root:o,rootMargin:"0px",threshold:Array.from({length:n}).map((function(e,t){return(t+1)/n}))},l=new IntersectionObserver((function(t){var r,n,o=h(t,1)[0],u=o.intersectionRatio,s=o.boundingClientRect.y,l=o.isIntersecting;r=u>i&&l?"increase":"decrease",n=s>c&&l?"up":"down",i=u,c=s;var f={intersectRatio:u,isIntersecting:l,directionInterestRatio:r,directionScrollY:n};if(e){var p=e(f);p&&a(p)}else a(f)}),u);return l.observe(t),s.current=l,function(){l.disconnect(),s.current=void 0}}}),[n,o]),[u]}((function(t){return c.current<=e.RhvItemState.None&&(t.directionInterestRatio=o%2==0?"decrease":"increase",t.directionScrollY="down"),t}),a,f.thresholdCount,f.rootElement),d=h(b,1)[0],m=function(e){setTimeout((function(){I("emit",o),i&&i(e,o,s.current),f.onStateChange&&f.onStateChange(e,o,s.current)}))},y=t.useMemo((function(){if(!d||!v)return{};var t,r,n=[],o={},i=window.innerHeight,u=d.directionInterestRatio,a=d.directionScrollY,s=d.intersectRatio,l=d.isIntersecting,f=v.width,p=v.height,h=p*s,b=100*(1-h/i),m=c.current;(m=h>=2?l&&h>=i-2?e.RhvItemState.Focus:e.RhvItemState.Enter:e.RhvItemState.Leave)===e.RhvItemState.Enter?("down"===a?(t="increase"==u?"top":"bottom",r="increase"===u?"left":"right"):(t="decrease"==u?"top":"bottom",r="decrease"===u?"left":"right"),o[t]=0,o[r]="".concat(b,"%"),o.height="".concat(p,"px"),o.width="".concat(f,"px"),n.push("rhv-item-float")):n.push("rhv-item-absolute");return{className:n.join(" "),style:o,itemState:m}}),[v,d]),O=y.itemState,x=u(y,E);t.useLayoutEffect((function(){if(O){c.current===e.RhvItemState.None&&(I("Item",o,R(e.RhvItemState)[e.RhvItemState.Initial]),m(e.RhvItemState.Initial)),I("Item",o,R(e.RhvItemState)[O]),m(O);var t,r,n=s.current;n&&f.pauseAnimation&&(I("Animation",o,O!==e.RhvItemState.Focus),t=n,r="pause-state",O!==e.RhvItemState.Focus?t.hasAttribute(r)||t.setAttribute(r,""):t.hasAttribute(r)&&t.removeAttribute(r)),c.current=O}}),[O]);var w=t.useMemo((function(){var e={},t=(null==v?void 0:v.height)||0;return t>0&&(e.height="".concat(t,"px")),{className:["rhv-item-wrapper"].join(" "),style:e}}),[v]);return t.createElement("div",M({ref:a},w),t.createElement("div",M({ref:s},x),n))};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var C=function(r){var n,i=r.children,c=t.useState(),u=h(c,2),a=u[0],s=u[1],l=t.useRef((n=t.Children.count(i),Array.from({length:n}).map((function(){return!1})))),f=function(t,r){if(t===e.RhvItemState.Initial){var n=l.current;n[r]=!0,s(n.every((function(e){return e})))}},p=t.useMemo((function(){var e=t.Children.map(i,(function(e,r){var n={element:e,onStateChange:f,index:r};return t.createElement(A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({key:"rhv-cnt-".concat(++P)},n))}));return e}),[i]);return t.createElement("div",{className:"rhv-container",style:{opacity:a?1:0}},p)},N=["children"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.ReactFromModule=t,e.Rhv=function(e){var r=e.children,n=u(e,N);return t.createElement(S,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n),t.createElement(C,null,r))},e.RhvContainer=C,e.RhvItem=A}));
